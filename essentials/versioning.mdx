---
title: 'Versioning System'
description: 'Understanding project versions and branching'
---

## Overview

website2ai includes a built-in versioning system that tracks every iteration of your project. This allows you to:

- Track all changes and iterations
- Branch from any previous version
- Compare different approaches
- Maintain a complete history

## Core Concepts

### Base ID

Every project has a **base_id** - a unique identifier shared across all versions of that project.

```
base_id: 550e8400-e29b-41d4-a716-446655440000
```

This remains constant throughout the project's lifetime.

### Version Numbers

Each generation creates a new **version**, starting from 1 and incrementing:

```
Version 1: Initial generation
Version 2: Added dark mode
Version 3: Improved styling
Version 4: Added animations
...
```

### Website ID

The **website_id** combines base_id and version:

```
website_id = {base_id}_v{version}

Example: 550e8400-e29b-41d4-a716-446655440000_v2
```

This uniquely identifies a specific version of a project.

## Version Lifecycle

<Steps>
  <Step title="Create Project">
    ```bash
    POST /v1/websites
    {
      "initial_prompt": "Create a todo app",
      "title": "My Todo App"
    }
    ```

    Creates project with version 1 in `pending` state.
  </Step>

  <Step title="Generate Version 1">
    ```bash
    POST /v1/websites/{base_id}/generate
    {
      "prompt": "Create a todo app",
      "base_version": null
    }
    ```

    Generates the initial version.
  </Step>

  <Step title="Iterate (Version 2)">
    ```bash
    POST /v1/websites/{base_id}/generate
    {
      "prompt": "Add dark mode toggle",
      "base_version": null  # null = from latest (v1)
    }
    ```

    Creates version 2 based on version 1.
  </Step>

  <Step title="Branch from v1">
    ```bash
    POST /v1/websites/{base_id}/generate
    {
      "prompt": "Try a different color scheme",
      "base_version": 1  # Explicitly branch from v1
    }
    ```

    Creates version 3 based on version 1 (not v2).
  </Step>
</Steps>

## Branching Strategies

### Linear History (Default)

Always generate from the latest version:

```
v1 → v2 → v3 → v4
```

```javascript
// Always use base_version: null or omit it
await generateWebsite(baseId, "Add feature X", null);
await generateWebsite(baseId, "Add feature Y", null);
await generateWebsite(baseId, "Add feature Z", null);
```

### Branching from Specific Version

Try alternative approaches by branching from any version:

```
       ┌─ v3 (branch A)
v1 ─── v2
       └─ v4 (branch B)
```

```javascript
const baseId = '550e8400-e29b-41d4-a716-446655440000';

// v1 → v2 (linear)
await generateWebsite(baseId, "Add dark mode", null);

// Branch from v1 (creates v3)
await generateWebsite(baseId, "Try blue theme", 1);

// Branch from v1 again (creates v4)
await generateWebsite(baseId, "Try minimal design", 1);
```

### Exploring Multiple Paths

Great for A/B testing or trying different approaches:

```
v1 ─── v2 (Feature A)
  └─── v3 (Feature B alternative)
  └─── v4 (Feature C alternative)
```

```javascript
// Initial version
const { base_id } = await createWebsite(
  "Create a landing page"
);
await generateWebsite(base_id, "Create a landing page", null);

// Try three different hero sections
await generateWebsite(base_id, "Hero with video background", 1);
await generateWebsite(base_id, "Hero with image slider", 1);
await generateWebsite(base_id, "Hero with animated gradient", 1);

// Pick the best one and continue from there
// If v3 was best, branch from v3:
await generateWebsite(base_id, "Add features section", 3);
```

## Managing Versions

### List All Versions

```bash
GET /v1/websites/{base_id}/versions
```

Returns all versions of a project:

```json
{
  "base_id": "550e8400-e29b-41d4-a716-446655440000",
  "versions": [
    {
      "version": 1,
      "status": "completed",
      "title": "Todo App - Initial",
      "created_at": "2025-10-20T10:00:00Z"
    },
    {
      "version": 2,
      "status": "completed",
      "title": "Todo App - With dark mode",
      "created_at": "2025-10-20T11:00:00Z"
    },
    {
      "version": 3,
      "status": "completed",
      "title": "Todo App - Blue theme experiment",
      "created_at": "2025-10-20T12:00:00Z"
    }
  ]
}
```

### Get Specific Version

```bash
GET /v1/websites/{base_id}/versions/{version}
```

Retrieves a specific version with all files:

```javascript
// Get version 2
const v2 = await fetch(
  `http://localhost:8000/v1/websites/${baseId}/versions/2`,
  { headers: { 'Authorization': 'Bearer TOKEN' } }
).then(r => r.json());

console.log(v2.files); // All files from version 2
```

### Get Latest Version

```bash
GET /v1/websites/{base_id}
```

Always returns the latest version (highest version number).

## Message History

Each version includes a chat message that describes what was generated:

```bash
GET /v1/websites/{base_id}/messages
```

Returns ALL messages across all versions:

```json
{
  "base_id": "550e8400-e29b-41d4-a716-446655440000",
  "messages": [
    {
      "role": "user",
      "content": "Create a todo app",
      "version": 1,
      "created_at": "2025-10-20T10:00:00Z"
    },
    {
      "role": "assistant",
      "content": "I've created a todo app with...",
      "version": 1,
      "created_at": "2025-10-20T10:00:30Z"
    },
    {
      "role": "user",
      "content": "Add dark mode toggle",
      "version": 2,
      "created_at": "2025-10-20T11:00:00Z"
    }
  ]
}
```

### Version-Specific Messages

```bash
GET /v1/websites/{base_id}/versions/{version}/messages
```

Returns only messages for that version.

## Best Practices

### When to Create New Versions

<AccordionGroup>
  <Accordion title="Linear Changes">
    Use `base_version: null` when making incremental improvements:
    - Adding new features
    - Bug fixes
    - Style refinements
    - Progressive enhancements
  </Accordion>

  <Accordion title="Branching">
    Use specific `base_version` when:
    - Trying alternative approaches
    - A/B testing designs
    - Experimenting with major changes
    - Reverting to an earlier state
  </Accordion>

  <Accordion title="Clean History">
    - Keep version messages descriptive
    - Delete experimental branches you won't use
    - Document major version milestones
  </Accordion>
</AccordionGroup>

### Version Naming Strategy

Since titles aren't version-specific, use clear prompts:

```javascript
// Bad: Vague prompts
"Make it better"
"Fix it"
"Update"

// Good: Descriptive prompts
"Add dark mode toggle to header"
"Replace grid layout with flexbox in TodoList"
"Implement drag-and-drop with dnd-kit library"
```

## Version Comparison

To compare two versions:

```javascript
async function compareVersions(baseId, v1, v2) {
  const [version1, version2] = await Promise.all([
    fetch(`/v1/websites/${baseId}/versions/${v1}`).then(r => r.json()),
    fetch(`/v1/websites/${baseId}/versions/${v2}`).then(r => r.json())
  ]);

  // Compare files
  const v1Files = new Set(version1.files.map(f => f.file_path));
  const v2Files = new Set(version2.files.map(f => f.file_path));

  const added = [...v2Files].filter(f => !v1Files.has(f));
  const removed = [...v1Files].filter(f => !v2Files.has(f));
  const modified = [...v1Files].filter(f => v2Files.has(f));

  console.log('Added:', added);
  console.log('Removed:', removed);
  console.log('Modified:', modified);
}
```

## Storage Considerations

- Each version stores complete file snapshots (not diffs)
- File content is stored in R2 (cheap object storage)
- Database stores metadata only
- Deleting a project deletes ALL versions

## Future Enhancements

Planned features for the versioning system:

- [ ] Visual diff viewer
- [ ] Merge functionality
- [ ] Automatic branching for major changes
- [ ] Version tags and milestones
- [ ] Collaborative versioning

## Example Workflow

Here's a complete example of using versions effectively:

```javascript
// 1. Create initial project
const { base_id } = await createWebsite(
  "Create an e-commerce product page"
);

// 2. Generate v1
await generateWebsite(base_id, "Create an e-commerce product page", null);
// → Version 1: Basic product page

// 3. Iterate linearly
await generateWebsite(base_id, "Add image gallery", null);
// → Version 2: With gallery

await generateWebsite(base_id, "Add reviews section", null);
// → Version 3: With reviews

// 4. Try alternative v2 approach
await generateWebsite(base_id, "Add 3D product viewer instead", 1);
// → Version 4: Branches from v1 with 3D viewer

// 5. Compare and choose
const v3 = await getWebsiteVersion(base_id, 3); // Gallery approach
const v4 = await getWebsiteVersion(base_id, 4); // 3D viewer approach

// User prefers v4, continue from there
await generateWebsite(base_id, "Add size selector and variant options", 4);
// → Version 5: 3D viewer + size selector

// 6. Final touches
await generateWebsite(base_id, "Add related products section", null);
// → Version 6: Complete product page
```

## Next Steps

<CardGroup>
  <Card title="Generate API" icon="wand-magic-sparkles" href="/api-reference/endpoint/generate">
    Learn how to generate new versions
  </Card>

  <Card title="Get Versions" icon="code-branch" href="/api-reference/endpoint/get">
    Retrieve and compare versions
  </Card>
</CardGroup>
