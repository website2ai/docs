---
title: 'Generate Website'
api: 'POST http://localhost:8000/v1/websites/{base_id}/generate'
description: 'Generate or regenerate website code with AI'
---

## Overview

Generates a new version of the website using AI. This endpoint:

- Creates a new version for the project
- Starts async generation with Celery workers
- Returns immediately with `processing` status
- Streams progress via SSE

## Path Parameters

<ParamField path="base_id" type="string" required>
  The base ID of the project to generate
</ParamField>

## Headers

<ParamField header="Authorization" type="string" required>
  Bearer JWT token for authentication
</ParamField>

<ParamField header="Content-Type" type="string" required>
  Must be `application/json`
</ParamField>

## Body Parameters

<ParamField body="prompt" type="string" required>
  The generation prompt. This can be:
  - Initial generation: "Create a todo app"
  - Modification: "Add dark mode toggle"
  - Refinement: "Make the buttons more rounded"
</ParamField>

<ParamField body="base_version" type="number">
  Optional version to generate from:
  - `null` or omitted: Generate from latest version
  - `number`: Branch from specific version (e.g., 2 to branch from v2)

  This allows you to create alternative versions from any point in history.
</ParamField>

## Response

<ResponseField name="website_id" type="string">
  Unique identifier for this generation (base_id + new version)
</ResponseField>

<ResponseField name="version" type="number">
  New version number created
</ResponseField>

<ResponseField name="status" type="string">
  Will be `processing` as generation starts
</ResponseField>

<ResponseField name="message" type="string">
  Confirmation message
</ResponseField>

## Example Request

<CodeGroup>

```bash cURL - Initial Generation
curl -X POST http://localhost:8000/v1/websites/550e8400-e29b-41d4-a716-446655440000/generate \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "prompt": "Create a modern todo app with dark mode",
    "base_version": null
  }'
```

```bash cURL - Modify Latest
curl -X POST http://localhost:8000/v1/websites/550e8400-e29b-41d4-a716-446655440000/generate \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "prompt": "Add drag and drop functionality to reorder tasks",
    "base_version": null
  }'
```

```bash cURL - Branch from v2
curl -X POST http://localhost:8000/v1/websites/550e8400-e29b-41d4-a716-446655440000/generate \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "prompt": "Try a different color scheme - use blue instead of green",
    "base_version": 2
  }'
```

```javascript JavaScript
// Initial generation
const response = await fetch(
  'http://localhost:8000/v1/websites/550e8400-e29b-41d4-a716-446655440000/generate',
  {
    method: 'POST',
    headers: {
      'Authorization': 'Bearer YOUR_JWT_TOKEN',
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      prompt: 'Create a modern todo app with dark mode',
      base_version: null
    })
  }
);

const data = await response.json();

// Connect to SSE for real-time updates
const eventSource = new EventSource(
  `http://localhost:8001/sse/websites/${data.website_id}`
);

eventSource.onmessage = (event) => {
  const update = JSON.parse(event.data);
  console.log(update.type, update.data);

  if (update.type === 'completed') {
    eventSource.close();
    console.log('Generation complete!');
  }
};
```

```python Python
import requests

# Generate website
response = requests.post(
    'http://localhost:8000/v1/websites/550e8400-e29b-41d4-a716-446655440000/generate',
    headers={'Authorization': 'Bearer YOUR_JWT_TOKEN'},
    json={
        'prompt': 'Create a modern todo app with dark mode',
        'base_version': None
    }
)

data = response.json()
website_id = data['website_id']

# Stream progress with SSE
import sseclient
sse_response = requests.get(
    f'http://localhost:8001/sse/websites/{website_id}',
    stream=True
)

client = sseclient.SSEClient(sse_response)
for event in client.events():
    data = json.loads(event.data)
    print(f"{data['type']}: {data['data']}")

    if data['type'] == 'completed':
        break
```

</CodeGroup>

## Response Example

```json
{
  "website_id": "550e8400-e29b-41d4-a716-446655440000_v2",
  "version": 2,
  "status": "processing",
  "message": "Website generation started"
}
```

## Generation Process

Once you call this endpoint, the following happens:

<Steps>
  <Step title="Orchestration Started">
    Celery task begins, SSE event: `orchestration_started`
  </Step>

  <Step title="Project Planning">
    AI plans file structure (8-15 files typically)

    SSE event: `planning_completed` with file list
  </Step>

  <Step title="Interface Planning (Phase 1)">
    AI creates complete TypeScript type system

    SSE event: `interface_planning_completed`
  </Step>

  <Step title="Parallel File Generation (Phase 2)">
    Files generated in parallel by workers

    SSE events: `file_generating`, `file_completed` for each file
  </Step>

  <Step title="Finalization">
    Aggregate metadata, update status

    SSE event: `completed` with summary
  </Step>
</Steps>

## Versioning Behavior

| base_version | Behavior | New Version |
|--------------|----------|-------------|
| `null` or omitted | Generate from latest | latest + 1 |
| `2` | Branch from v2 | Finds max version + 1 |
| Invalid version | Error | N/A |

## Error Responses

### 404 Not Found

```json
{
  "detail": "Website project not found"
}
```

### 401 Unauthorized

```json
{
  "detail": "Could not validate credentials"
}
```

### 422 Validation Error

```json
{
  "detail": [
    {
      "loc": ["body", "prompt"],
      "msg": "field required",
      "type": "value_error.missing"
    }
  ]
}
```
